@model IEnumerable<GraciaDivina.Models.ViewModels.AdminProductVM>
@{
    ViewData["Title"] = "Productos";
}
<h1 class="h4 mb-3">Productos</h1>

@if (TempData["Msg"] != null)
{
    <div class="alert alert-success">@TempData["Msg"]</div>
}

<p>
    <a class="btn btn-primary" asp-action="Create">Nuevo producto</a>
    <button type="button" class="btn btn-outline-secondary btn-sm"
            onclick="location.href='@Url.Action("Index", "Home", new { area = "Admin" })'">
        ← Volver
    </button>
</p>

<div class="table-responsive">
    <table class="table align-middle">
        <thead>
            <tr>
                <th style="width:90px;">Img</th>
                <th>Nombre</th>
                <th>Categoría</th>
                <th class="text-end">Precio</th>
                <th>Activo</th>
                <th style="width:180px;"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var p in Model)
            {
                <tr>
                    <td>
                        <img src="@(string.IsNullOrEmpty(p.ImagenUrl) ? Url.Content("~/img/placeholder.svg") : p.ImagenUrl)"
                             style="width:80px;height:60px;object-fit:cover;border-radius:.25rem;" />
                    </td>
                    <td>@p.Nombre</td>
                    <td>@p.Categoria</td>
                    <td class="text-end">@p.Precio.ToString("C")</td>
                    <td>
                        @if (p.Activo)
                        {
                            <span class="badge bg-success">Sí</span>
                        }
                        else
                        {

                            <span class="badge bg-secondary">No</span>
                        }
                    </td>
                    <td>
                        <a class="btn btn-sm btn-outline-primary" asp-action="Edit" asp-route-id="@p.ProductoID">Editar</a>
                        <a class="btn btn-sm btn-outline-danger" asp-action="Delete" asp-route-id="@p.ProductoID">Eliminar</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
